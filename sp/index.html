<p id="out">wait...</p>
<script>
  const toSosirsLangRules = [
    { pattern: /жу/gi, replacement: 'җӓ' },
    { pattern: /ля/gi, replacement: 'лө' },
    { pattern: /я/gi, replacement: 'җӧ' },
    { pattern: /здрав/gi, replacement: 'здрӓві' },
    { pattern: /ла/gi, replacement: 'лөд' }, 
    { pattern: /а/gi, replacement: 'ӓ' },
    { pattern: /кот/gi, replacement: 'кітъ' },
    { pattern: /о/gi, replacement: 'ӧ' },
    { pattern: /у/gi, replacement: 'ӱ' },
    { pattern: /и/gi, replacement: 'ә' },
    { pattern: /й/gi, replacement: 'Ї' },
    { pattern: /([стк])(?=\s|$|\.|,|!|\?)/gi, replacement: '$1ъ' }
  ];

  const fromSosirsLangRules = [
    { pattern: /кітъ/gi, replacement: 'кот' },
    { pattern: /лө/gi, replacement: 'ля' },
    { pattern: /җӓ/gi, replacement: 'жу' },
    { pattern: /ӧ/gi, replacement: 'о' },
    { pattern: /ӱ/gi, replacement: 'у' },
    { pattern: /ә/gi, replacement: 'и' },
    { pattern: /Ї/gi, replacement: 'й' },
    { pattern: /(с|т|к)ъ/gi, replacement: '$1' }
  ];

  function applyRules(text, rules) {
    let result = text;
    for (const rule of rules) {
      result = result.replace(rule.pattern, rule.replacement);
    }
    return result;
  }

  function translate(text, direction) {
    if (direction === 'to') {
      return applyRules(text, toSosirsLangRules);
    } else if (direction === 'from') {
      return applyRules(text, fromSosirsLangRules);
    } else {
      console.error('Error: Direction not found');
      return '';
    }
  }

  const url = new URL(window.location);
  const sp = url.searchParams;
  const text = sp.get('t');
  const direction = sp.get('d');

  if (text && direction) {
    const result = translate(text, direction);
    document.getElementById('out').textContent = result;
  } else {
    document.getElementById('out').textContent = "Error: specify the url parameters 't' and 'd'";
  }
</script>
